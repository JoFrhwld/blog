[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Joe Fruehwald’s Blog",
    "section": "",
    "text": "Hello!\n\n\n\n\n\n\n\n\n  \n\n\n\n\nA lesson in over-preparing\n\n\n\n\n\n\n\n\n\n\n\n\n2022-12-10\n\n\nJosef Fruehwald\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/2022-12-10.html",
    "href": "posts/2022-12-10.html",
    "title": "A lesson in over-preparing",
    "section": "",
    "text": "One of the courses I taught in the Fall 2022 semester was Natural Language Processing (NLP). It was a fun course to teach, and I learned a lot since it’s not a topic in my core areas of research. At the same time, the amount of work I put into it has made me really start to rethink how I prepare for teaching.\nMy tendency, for a while, has been to prepare extensive course notes that I publish on my website (Exhibit A, Exhibit B). I’ve never really reflected on how much work that actually takes. Moreover, I don’t tend to consider it when I reflect on how much “writing” I get done (and inevitably get a bit discouraged about my productivity).\nBut, it occurred to me that I could quantify how much writing I really did this semester. I wrote all my course notes in Quarto, which generates a search index in a .json file. To get a total count of words that I wrote in course notes, I just need to parse that json file and tokenize it! I found a handy blog post about analyzing git repos that helped a lot in the process."
  },
  {
    "objectID": "posts/2022-12-10.html#setup",
    "href": "posts/2022-12-10.html#setup",
    "title": "A lesson in over-preparing",
    "section": "Setup",
    "text": "Setup\n\nlibrary(tidyverse)\nlibrary(tidyjson)\nlibrary(tidytext)\nlibrary(lubridate)\nlibrary(scales)\nlibrary(padr)\nlibrary(glue)\n\nThis block of code is just copied from the blog post I just mentioned.\n\n# Remote repository URL\nrepo_url <- \"https://github.com/JoFrhwld/2022_lin517.git\"\n\n# Directory into which git repo will be cloned\nclone_dir <- file.path(tempdir(), \"git_repo\")\n\n# Create command\nclone_cmd <- glue(\"git clone {repo_url} {clone_dir}\")\n\n# Invoke command\nsystem(clone_cmd)\n\nThere’s a handful of R libraries for reading json files into R, but after searching around I went with tidyjson because I like using tidyverse things.\n\nsearch_file <- file.path(clone_dir, \"_site\", \"search.json\")\nsite_search <- read_json(search_file)\n\nI was really glad to find that the search.json file is relatively flat, so pulling out the metadata and text was not as complicated as it could have been.\n\nsite_search |>\n  gather_array() |>\n  hoist(..JSON,\n    \"title\",\n    \"section\",\n    \"text\"\n  )  |>\n  as_tibble() |>\n  select(array.index, title, section, text) |>\n  unnest_tokens(input = text, output = \"words\") -> tokens_table\n\nI noticed in the json file that there were multiple entries for a single page of course notes, one for each subsection, but there were also some entries with the subsection value set to blank. I just wanted to double check that the blank section entries weren’t the entire page of lecture notes, with additional entries duplicating the text by subsection.\n\ntokens_table |>\n  mutate(has_section = section != \"\") |>\n  group_by(title, has_section) |>\n  count()\n\n# A tibble: 45 × 3\n# Groups:   title, has_section [45]\n   title                              has_section     n\n   <chr>                              <lgl>       <int>\n 1 Addendum                           FALSE          43\n 2 Addendum                           TRUE          100\n 3 Additional Neural Network Concepts FALSE         473\n 4 Additional Neural Network Concepts TRUE         1109\n 5 Comprehensions and Useful Things   FALSE        1116\n 6 Data Processing                    FALSE         654\n 7 Data Processing                    TRUE         1804\n 8 Data Sparsity                      FALSE         720\n 9 Data Sparsity                      TRUE         1724\n10 Evaluating models                  FALSE          42\n# … with 35 more rows\n\n\nLooks like no. The blank titled sections are probably cases where I had a paragraph or two that came before the first section header.\n\nSo how many words?\n\ntokens_table |>\n  nrow()\n\n[1] 43637\n\n\nBased on the default tokenization from tidytext, it looks like I wrote just north of 40k words. I don’t have the best sense of how this compares to other kinds of genre writing, but apparently the goal of NaNoWriMo (National Novel Writing Month) is to write a novel that is 50k words.\nSo, I didn’t quite write a novel. But the amount of work that went into these 40k words was still considerable in terms of background research and trying to come to my own understanding of relatively complex mathematical formulae so that I could distill them into a comprehensible lesson. Also not accounted for was all the code I wrote and had to debug within the course notes!"
  },
  {
    "objectID": "posts/2022-12-10.html#how-many-words-did-i-write-over-time",
    "href": "posts/2022-12-10.html#how-many-words-did-i-write-over-time",
    "title": "A lesson in over-preparing",
    "section": "How many words did I write over time?",
    "text": "How many words did I write over time?\nSince I was publishing the course notes to github, that means I also have a preserved history of how my word count grew over time. All I have to do is apply the same procedures to the history of search.json.\n\n\ncode to get the git commit history\nlog_format_options <- c(datetime = \"cd\", commit = \"h\", parents = \"p\", author = \"an\", subject = \"s\")\noption_delim <- \"\\t\"\nlog_format   <- glue(\"%{log_format_options}\") |> glue_collapse(option_delim)\nlog_options  <- glue('--pretty=format:\"{log_format}\" --date=format:\"%Y-%m-%d %H:%M:%S\"')\nlog_cmd      <- glue('git -C {clone_dir} log {log_options}')\n\n\n\nsystem(log_cmd, intern = TRUE) |>\n  str_split_fixed(option_delim, length(log_format_options)) |>\n  as_tibble(.name_repair = \"minimal\") |>\n  setNames(names(log_format_options))->commit_history\n\n\n\nget_length() function definition\nget_length <- function(commit, clone_dir){\n  search_file <- file.path(clone_dir, \"_site\", \"search.json\")\n  checkout_cmd <- glue(\"git -C {clone_dir} checkout {commit} {search_file}\")\n  system(checkout_cmd)\n  site_search <- read_json(search_file)\n  site_search |>\n    gather_array() |>\n    hoist(..JSON,\n      \"title\",\n      \"section\",\n      \"text\"\n    )  |>\n    as_tibble() |>\n    select(array.index, title, section, text) |>\n    unnest_tokens(input = text, output = \"words\") |>\n    nrow() -> word_count\n  return(word_count)\n}\n\n\nThe data frame commit_history contains metadata about each commit. What I’ll do next is apply the function I wrote in the collapsed code above to the list of commit hashes, and get the word count at each commit.\n\ncommit_history |>\n  mutate(word_count = map(commit, ~get_length(.x, clone_dir)) |>\n           simplify()) -> word_history\n\nI often had many commits in a single day, so to simplify things a bit, I’ll just get the max number of words I had by the end of a given day. Fortunately, I did not stay up past midnight pushing commits this semester, so the data shouldn’t be messed up by work sessions overlapping across days.\n\nword_history |>\n  mutate(datetime = ymd_hms(datetime)) |>\n  thicken(\"day\") |>\n  group_by(datetime_day) |>\n  summarise(words = max(word_count)) |>\n  arrange(datetime_day) -> daily_words\n\n\nCumulative Wordcount\nHere’s the cumulative count of words over the course of the semester. I forget why, exactly, it starts out at 7,000 words. I think I might’ve been managing the course notes differently between the end of August and start of September, and then just copied them over. But it is a pretty continuous rise, with a few notable plateaus. Some of those plateaus occurred when I had actually prepared more than could be covered in a one or two class meetings, so we stayed with a set of lecture notes for a longer period of time.\n\n\nplotting code\ndaily_words |>\n  pad(\"day\") |>\n  fill(words) |>\n  ggplot(aes(datetime_day, words))+\n    geom_ribbon(aes(ymin = 0, ymax = words), alpha = 0.2)+\n    geom_line(linewidth = 1,\n              lineend = \"round\")+\n    expand_limits(y = 0)+\n    scale_y_continuous(labels = label_comma(),\n                       expand = expansion(mult = c(0, 0.05)))+\n    scale_x_date(expand = expansion(mult = 0.01))+\n    labs(x = \"date\",\n         y = \"number of words\",\n         title = \"Cumulative number of words in course notes\")\n\n\n\n\n\nFigure 1: The number of words I wrote over the course of Fall 2022\n\n\n\n\n\n\nWhen was I writing?\nI can also double check when I was writing my course notes. I was teaching on a Monday-Wednesday-Friday schedule, and Fridays were usually given over to practical exercises (the text of which is largely absent from these counts…).\nIt was no surprise to me that I wrote most of the course notes on Sundays. The total number of Sunday words is about 17k, which comes out to about mean of about 1,300 words for Sundays this semester.\n\n\nplotting code\ndaily_words |>\n  pad(\"day\") |>\n  fill(words) |>\n  mutate(daily_words = words - lag(words),\n         wday = wday(datetime_day, label = T)) |>\n  drop_na() |>\n  group_by(wday) |>\n  summarise(word = sum(daily_words)) |>\n  ggplot(aes(wday, word))+\n    geom_col(fill = \"grey70\")+\n    scale_y_continuous(labels = label_comma())+\n    labs(x = \"day of the week\",\n         y = \"total words\",\n         title = \"words written by day of week\")\n\n\n\n\n\nFigure 2: The total number of words I wrote per day of the week."
  },
  {
    "objectID": "posts/2022-12-10.html#thoughts",
    "href": "posts/2022-12-10.html#thoughts",
    "title": "A lesson in over-preparing",
    "section": "Thoughts",
    "text": "Thoughts\nWhile I feel pretty good about the material I produced, I really don’t think this way of doing things is tenable. The writing that I did do for these course notes was writing that I didn’t do for any other project. Moreover, you can almost see how much energy Sundays took out of me! And even though I wasn’t writing as many course notes Tuesday through Friday, those were full work days that I was doing all of my other work during.\nSo the upshot is: I’m already brainstorming on how to not prepare like this for a class again!"
  },
  {
    "objectID": "posts/2022-12-10.html#sources",
    "href": "posts/2022-12-10.html#sources",
    "title": "A lesson in over-preparing",
    "section": "Sources",
    "text": "Sources\n\nhttps://drsimonj.svbtle.com/embarking-on-a-tidy-git-analysis\nhttps://tidyr.tidyverse.org/reference/hoist.html"
  }
]